import{t as B,r as d,j as e,v as W,w as H,x as V,z as M,y as w,i as z}from"./index-DFBXhpBk.js";import{u as G}from"./formik.esm-CiWefhGh.js";import{c as Q,a as C}from"./index.esm-B2SHaAPu.js";import{C as Y}from"./Container-CwOtlOap.js";import{c as E,u as q}from"./ThemeProvider-Ck5zl7No.js";import{C as T}from"./Card-BxDnaD5Q.js";import{B as u}from"./Button-BiqTYmiZ.js";var _={exports:{}},J="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",K=J,X=K;function L(){}function O(){}O.resetWarningCache=L;var Z=function(){function r(p,m,h,x,b,f){if(f!==X){var j=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw j.name="Invariant Violation",j}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:O,resetWarningCache:L};return a.PropTypes=a,a};_.exports=Z();var ee=_.exports;const k=B(ee),te={type:k.string,tooltip:k.bool,as:k.elementType},$=d.forwardRef(({as:r="div",className:s,type:a="valid",tooltip:p=!1,...m},h)=>e.jsx(r,{...m,ref:h,className:E(s,`${a}-${p?"tooltip":"feedback"}`)}));$.displayName="Feedback";$.propTypes=te;const re=d.createContext({}),D=d.forwardRef(({bsPrefix:r,type:s,size:a,htmlSize:p,id:m,className:h,isValid:x=!1,isInvalid:b=!1,plaintext:f,readOnly:j,as:v="input",...S},F)=>{const{controlId:N}=d.useContext(re);return r=q(r,"form-control"),e.jsx(v,{...S,type:s,size:p,ref:F,readOnly:j,id:m||N,className:E(h,f?`${r}-plaintext`:r,a&&`${r}-${a}`,s==="color"&&`${r}-color`,x&&"is-valid",b&&"is-invalid")})});D.displayName="FormControl";const g=Object.assign(D,{Feedback:$}),U=d.forwardRef(({bsPrefix:r,variant:s,animation:a="border",size:p,as:m="div",className:h,...x},b)=>{r=q(r,"spinner");const f=`${r}-${a}`;return e.jsx(m,{ref:b,...x,className:E(h,f,p&&`${f}-${p}`,s&&`text-${s}`)})});U.displayName="Spinner";const le=()=>{const[r,s]=d.useState(!1),[a,p]=d.useState([]),{data:m}=W(),[h,{isSuccess:x,isError:b,isLoading:f}]=H(),[j,{isSuccess:v,isLoading:S}]=V(),[F,{isSuccess:N,isLoading:A}]=M(),[o,P]=d.useState(),[I,R]=d.useState([]),l=G({enableReinitialize:!0,initialValues:{name:o?o.name:"",price:o?o.price:"",desc:o?o.desc:"",hero:o?o.hero:"",qty:o?o.qty:""},validationSchema:Q({name:C().required("Enter name"),price:C().required("Enter price"),desc:C().required("Enter desc"),qty:C().required("Enter qty")}),onSubmit:(t,{resetForm:c})=>{if(o){const i=new FormData;for(const n in t)n!=="hero"&&i.append(n,t[n]);for(const n of a)i.append("remove",n);for(const n of t.hero)i.append("hero",n);j({_id:o._id,fd:i}),P(null)}else{const i=new FormData;for(const n in t)n!=="hero"&&i.append(n,t[n]);for(const n of t.hero)i.append("hero",n);h(i)}R([]),c()}}),y=t=>z({"form-control my-2":!0,"is-invalid":l.touched[t]&&l.errors[t],"is-valid":l.touched[t]&&!l.errors[t]});return d.useEffect(()=>{x&&w.success("product create success")},[x]),d.useEffect(()=>{N&&w.success("product remmove success")},[N]),d.useEffect(()=>{v&&w.success("product update success")},[v]),e.jsxs(Y,{children:[f||A||S?e.jsxs(e.Fragment,{children:["Please wait... ",e.jsx(U,{})]}):e.jsxs(T,{children:[e.jsx(T.Header,{children:"Products"}),e.jsx(T.Body,{children:e.jsxs("form",{onSubmit:l.handleSubmit,children:[e.jsx(g,{className:y("name"),placeholder:"enter name",...l.getFieldProps("name")}),e.jsx(g,{type:"number",placeholder:"enter price",className:y("price"),...l.getFieldProps("price")}),e.jsx(g,{type:"text",placeholder:"enter desc",className:y("desc"),...l.getFieldProps("desc")}),e.jsx(g,{className:y("qty"),...l.getFieldProps("qty"),type:"number",placeholder:"enter qty"}),o?e.jsxs(e.Fragment,{children:[o.hero.map(t=>e.jsx("div",{children:e.jsxs("div",{className:`${a.includes(t)&&"border border-danger my-2"} d-flex justify-content-between align-items-center px-4`,children:[e.jsx("img",{src:t,height:50,className:"me-2 rounded-3",alt:""}),a.includes(t)?e.jsx(u,{onClick:()=>p(a.filter(c=>c!==t)),variant:"dark",children:"Cancel"}):e.jsx(u,{variant:"danger",onClick:c=>{a.includes(t)||p([...a,t])},children:"Remove"})]})})),r?e.jsxs(e.Fragment,{children:[e.jsx(g,{type:"file",placeholder:"enter hero",multiple:!0,className:y("hero"),onChange:t=>{const c=[];for(const i of t.target.files)c.push(URL.createObjectURL(i));R(c),l.setFieldValue("hero",t.target.files)}}),e.jsx(u,{onClick:t=>s(!1),variant:"dark",className:"my-3",children:"cancel"}),"                                  "]}):e.jsx(u,{onClick:t=>s(!0),className:"my-3",children:"Add New Image"})]}):e.jsx(g,{type:"file",placeholder:"enter hero",multiple:!0,className:y("hero"),onChange:t=>{const c=[];for(const i of t.target.files)c.push(URL.createObjectURL(i));R(c),l.setFieldValue("hero",t.target.files)}}),I.map(t=>e.jsx("img",{src:t,height:50,alt:""})),o?e.jsxs(e.Fragment,{children:[e.jsx(u,{type:"submit",variant:"warning",className:"w-100 btn-lg",children:"update Product"}),e.jsx(u,{type:"button",onClick:()=>P(null),variant:"outline-dark",className:"w-100 btn-lg mt-3",children:"Cancel"})]}):e.jsx(u,{type:"submit",className:"w-100 btn-lg",children:"Add Product"})]})})]}),e.jsxs("table",{class:"table table-dark table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"name"}),e.jsx("th",{children:"desc"}),e.jsx("th",{children:"price"}),e.jsx("th",{children:"qty"}),e.jsx("th",{children:"hero"}),e.jsx("th",{children:"actions"})]})}),e.jsx("tbody",{children:m&&m.result.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:t.desc}),e.jsx("td",{children:t.price}),e.jsx("td",{children:t.qty}),e.jsx("td",{children:t.hero.map(c=>e.jsx("img",{src:c,height:50,className:"mx-2 rounded"}))}),e.jsxs("td",{children:[e.jsx(u,{onClick:()=>P(t),className:"me-2",variant:"warning",children:"Edit"}),e.jsx(u,{onClick:()=>F(t._id),className:"me-2",variant:"danger",children:"Remove"})]})]},t._id))})]})]})};export{le as default};
