import{r,g as b,h as v,a as E,y as i,j as e}from"./index-DCvtzFqW.js";import{u as S}from"./formik.esm-DB3wtbIE.js";import{c as y,a as f}from"./index.esm-Cqnwv3Eo.js";import{h as u}from"./HandleClasses-5Gdx4Iqs.js";const w=()=>{const[a,o]=r.useState(!1),[p,{isSuccess:n,isLoading:h,error:x,isError:t}]=b(),[N,{isSuccess:l,isError:c,isLoading:j,error:d}]=v(),g=E(),s=S({enableReinitialize:!0,initialValues:{userName:"",otp:""},validationSchema:y({userName:f().required("Enter Name or email"),otp:f()}),onSubmit:(m,{resetForm:L})=>{a?(N(m),console.log("verify mutation")):p(m)}});return r.useEffect(()=>{n&&(s.setFieldValue("otp",""),i.success("please verify OTP"),o(!0))},[n]),r.useEffect(()=>{t&&i.error(x.data.message)},[t]),r.useEffect(()=>{l&&g("/admin")},[l]),r.useEffect(()=>{c&&(o(!1),i.error(d.data?d.data.message:"something went wrong"))},[c]),h||j?e.jsx("p",{children:"PLEASE WAIT ........"}):e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:s.handleSubmit,children:e.jsx("div",{className:"conatiner",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-6 offset-sm-3",children:e.jsxs("div",{class:"card",children:[e.jsx("div",{class:"card-header",children:"ADMIN LOGIN"}),e.jsxs("div",{class:"card-body",children:[a?e.jsxs("div",{children:[e.jsx("label",{for:"otp",className:"form-label",children:"Enter OTP"}),e.jsx("input",{type:"text",...s.getFieldProps("otp"),className:u(s,"otp"),id:"otp",placeholder:"verify OTP"}),e.jsx("span",{className:"valid-feedback",children:"Looks good"}),e.jsx("span",{className:"error-feedback",children:s.errors.otp})]}):e.jsxs("div",{children:[e.jsx("label",{for:"userName",className:"form-label",children:"Enter name or mobile no"}),e.jsx("input",{type:"text",id:"userName",...s.getFieldProps("userName"),className:u(s,"userName"),placeholder:"Enter mobile or name"}),e.jsx("span",{className:"valid-feedback",children:"Looks good"}),e.jsx("span",{className:"error-feedback",children:s.errors.userName})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3",children:a?"verify OTP":"Login"})]})]})})})})})})};export{w as default};
